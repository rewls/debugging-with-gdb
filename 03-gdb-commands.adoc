= 3 gdb Commands
:toc: left

* You can abbreviate a gdb command to the first few letters of the command
  name, if that abbreviation is unambiguous; and you can repeat certain gdb
  commands by typing just `RET`.
* You can also use the `TAB` key to get gdb to fill out the rest of a word in
  a command (or to show you the alternatives available, if there is more than
  one possibility).

== 3.1 Command Syntax

* A gdb command is a single line of input.
* There is no limit on how long it can be.
* It starts with a command name, which is followed by arguments whose meaning depends on the command name.
* For example, the command step accepts an argument which is the number of
  times to step, as in \'``step 5``'.
* You can also use the `step` command with no arguments.
* Some commands do not allow any arguments.

'''

* gdb command names may always be truncated if that abbreviation is
  unambiguous.
* Other possible command abbreviations are listed in the documentation for
  individual commands.
* In some cases, even ambiguous abbreviations are allowed; for example, `s` is
  specially defined as equivalent to `step` even though there are other
  commands whose names start with `s`.
* You can test abbreviations by using them as arguments to the `help` command.

'''

* A blank line as input to gdb (typing just `RET`) means to repeat the
  previous command.
* Certain commands (for example, `run`) will not repeat this way; these are
  commands whose unintentional repetition might cause trouble and which you
  are unlikely to want to repeat.
* User-defined commands can disable this feature; see Section 23.1.1 [Define],
  page 391.

'''

* The `list` and `x commands, when you repeat them with `RET`, construct new
  arguments rather than repeating exactly as typed.
* This permits easy scanning of source or memory.

'''

* gdb can also use `RET` in another way: to partition lengthy output, in a way
  similar to the common utility `more` (see Section 22.4 [Screen Size], page
  370).
* Since it is easy to press one RET too many in this situation, gdb disables
  command repetition after any command that generates this sort of display.

'''

* Any text from a `#` to the end of the line is a comment; it does nothing.
* This is useful mainly in command files (see Section 23.1.3 [Command Files],
  page 395).

'''

* The `Ctrl-o` binding is useful for repeating a complex sequence of commands.
* This command accepts the current line, like `RET`, and then fetches the next
  line relative to the current line from the history for editing.

== 3.2 Command Settings

* Many commands change their behavior according to command-specific variables
  or settings.
* These settings can be changed with the `set` subcommands.
* For example, the `print` command (see Chapter 10 [Examining Data], page 141)
  prints arrays differently depending on settings changeable with the commands
  `set print elements NUMBER-OF-ELEMENTS` and `set print array-indexes`, among
  others.

'''

* You can change these settings to your preference in the `gdbinit` files
  loaded at gdb startup.
* See Section 2.1.3 [Startup], page 16.

'''

* The settings can also be changed interactively during the debugging session.
* For example, to change the limit of array elements to print, you can do the
  following:

....
(gdb) set print elements 10
(gdb) print some_array
$1 = {0, 10, 20, 30, 40, 50, 60, 70, 80, 90...}
....

'''

* The above `set print elements 10` command changes the number of elements to
  print from the default of 200 to 10.
* If you only intend this limit of 10 to be used for printing `some_array`,
  then you must restore the limit back to 200, with `set print elements 200`.
* Some commands allow overriding settings with command options.
* For example, the `print` command supports a number of options that allow
  overriding relevant global print settings as set by `set print` subcommands.
* See [print options], page 141.
* The example above could be rewritten as:

....
(gdb) print -elements 10 -- some_array
$1 = {0, 10, 20, 30, 40, 50, 60, 70, 80, 90...}
....

'''

* Alternatively, you can use the `with` command to change a setting
  temporarily, for the duration of a command invocation.

'''

`with _setting_ [_value_] [-- _command_]`::
`w _setting_ [_value_] [-- _command_]`::
* Temporarily set _setting_ to _value_ for the duration of command.
+
'''
* _setting_ is any setting you can change with the `set` subcommands.
* _value_ is the value to assign to `setting` while running `command`.
+
'''
* If no _command_ is provided, the last command executed is repeated.
+
'''
* If a _command_ is provided, it must be preceded by a double dash (`--`)
  separator.
* This is required because some settings accept free-form arguments, such as
  expressions or filenames.
+
'''
* For example, the command
+
....
(gdb) with print array on -- print some_array
....
+
is equivalent to the following 3 commands:
+
....
(gdb) set print array on
(gdb) print some_array
(gdb) set print array off
....

* The `with` command is particularly useful when you want to override a
  setting while running user-defined commands, or commands defined in Python
  or Guile.
* See Chapter 23 [Extending GDB], page 391.
+
....
(gdb) with print pretty on -- my_complex_command
....
* To change several settings for the same command, you can nest `with` commands.
* For example, `with language ada -- with print elements 10` temporarily
  changes the language to Ada and sets a limit of 10 elements to print for
  arrays and strings.
